<div class="container" *ngIf="!firstFormSubmitted && !secondFormSubmitted; else additionalFill">
    <span class="ff-bold sm-font alt-blacken">Residence Details</span>
    <div class="form-container">
        <div class="card aadhaar-details-card" (click)="enterAadhaarDetails()">
            <div class="row">
                <div class="col-10">
                    <span class="ff-bold sm-font">Pull details from Aadhaar</span><br>
                    <span class="ff-regular fs-12">This will also help you in your KYC verification</span>
                </div>
                <div class="col-2">
                    <img class="aadhaar-pull-icon" src="assets/images/pull-aadhaar-arrow.svg" alt="pull">
                </div>
            </div>            
        </div>

        <span class="mt-1rem flex-center"><span class="long-hyphen">__</span> <span class="or-text">Or</span> <span class="long-hyphen">__</span></span>
        <div class="mt-1rem card manual-details-card">
            <div class="row">
                <div class="col-10">
                    <span class="ff-bold sm-font">Enter address manually</span><br>
                    <span class="ff-regular fs-12">Fill the details manually</span>
                </div>
                <div class="col-2">
                    <a (click)="isManualEntryCollapsed = !isManualEntryCollapsed">
                        <img class="collapser-icon" [ngClass]="{'invert': !isManualEntryCollapsed}" src="assets/images/chevron-down.svg" alt="pull">
                    </a>
                </div>
            </div>    
            
            <div [ngbCollapse]="!isManualEntryCollapsed" class="mt-1rem">
                <form class="manual-form" [formGroup]="residenceDetailsForm">
                    <div class="row">
                        <div class="col">
                            <span class="ff-regular fs-14">Current Address</span>
                            <input class="mt-0 mb-0" formControlName="addressLine1" placeholder="Address Line 1">
                            <input class="mt-1rem mb-0" formControlName="addressLine2" placeholder="Address Line 2">
                            <input class="mt-1rem mb-0" formControlName="landmark" placeholder="Landmark">
                            <input class="mt-1rem mb-0" formControlName="pincode" placeholder="Pincode">
                            <div class="formField mt-1rem">
                                <div ngbDropdown>
                                    <input [ngClass]="{'errorInput': formSubmitted && residenceDetailsForm.get('city').hasError('required') }" class="dropdown-toggle mt-0 mb-1rem" readonly ngbDropdownToggle formControlName="city" placeholder="City" required><span ngbDropdownToggle></span>
                                    <div ngbDropdownMenu>
                                        <button ngbDropdownItem *ngFor="let city of cities" value="city.value" (click)="assignDropdownVal('city', city.label)">{{ city.label }}</button>
                                    </div>
                                </div>
                                <p class='errorMsg city-err' *ngIf="formSubmitted && residenceDetailsForm.get('city').hasError('required')">City field is required
                                </p>
                            </div>
                            <div class="formField">
                                <div ngbDropdown>
                                    <input [ngClass]="{'errorInput': formSubmitted && residenceDetailsForm.get('state').hasError('required') }" class="dropdown-toggle mt-0 mb-1rem" readonly ngbDropdownToggle formControlName="state" placeholder="State" required><span ngbDropdownToggle></span>
                                    <div ngbDropdownMenu>
                                        <button ngbDropdownItem *ngFor="let state of states" value="state.value" (click)="assignDropdownVal('state', state.label)">{{ state.label }}</button>
                                    </div>
                                </div>
                                <p class='errorMsg state-err' *ngIf="formSubmitted && residenceDetailsForm.get('state').hasError('required')">State field is required
                                </p>
                            </div>
                            <div>
                                <label class="checkbox small">
                                  <input type="checkbox" name='sameAddress' [(ngModel)]='sameAddress' [ngModelOptions]="{standalone: true}">
                                  <div class="blue fs-14px">
                                      Your permanent address same as current address
                                  </div>
                                  <span class="tick"></span>
                                </label>
                                <p class='errorMsg' *ngIf="formSubmitted && !sameAddress">
                                  * This field is required 
                                </p>
                            </div>
                        </div>

                        <div class="col mt-1rem" *ngIf="!sameAddress">
                            <span class="ff-regular fs-14">Permanent Address</span>
                            <input class="mt-0 mb-0" formControlName="addressLine1" placeholder="Address Line 1">
                            <input class="mt-1rem mb-0" formControlName="addressLine2" placeholder="Address Line 2">
                            <input class="mt-1rem mb-0" formControlName="landmark" placeholder="Landmark">
                            <input class="mt-1rem mb-0" formControlName="pincode" placeholder="Pincode">
                            <div class="formField mt-1rem">
                                <div ngbDropdown>
                                    <input [ngClass]="{'errorInput': formSubmitted && residenceDetailsForm.get('city').hasError('required') }" class="dropdown-toggle mt-0 mb-1rem" readonly ngbDropdownToggle formControlName="city" placeholder="City" required><span ngbDropdownToggle></span>
                                    <div ngbDropdownMenu>
                                        <button ngbDropdownItem *ngFor="let city of cities" value="city.value" (click)="assignDropdownVal('city', city.label)">{{ city.label }}</button>
                                    </div>
                                </div>
                                <p class='errorMsg city-err' *ngIf="formSubmitted && residenceDetailsForm.get('city').hasError('required')">City field is required
                                </p>
                            </div>
                            <div class="formField">
                                <div ngbDropdown>
                                    <input [ngClass]="{'errorInput': formSubmitted && residenceDetailsForm.get('state').hasError('required') }" class="dropdown-toggle mt-0 mb-1rem" readonly ngbDropdownToggle formControlName="state" placeholder="State" required><span ngbDropdownToggle></span>
                                    <div ngbDropdownMenu>
                                        <button ngbDropdownItem *ngFor="let state of states" value="state.value" (click)="assignDropdownVal('state', state.label)">{{ state.label }}</button>
                                    </div>
                                </div>
                                <p class='errorMsg state-err' *ngIf="formSubmitted && residenceDetailsForm.get('state').hasError('required')">State field is required
                                </p>
                            </div>
                        </div>
                        
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<ng-template #additionalFill>
    <!-- other details -->
    <div *ngIf="!secondFormSubmitted else finalFill">
        other details
    </div>
</ng-template>

<ng-template #finalFill>
    <!-- nominee details -->
    nominee details
</ng-template>

<app-footer>
    <ng-container ngProjectAs='[footer]'>
        <button type="button" class="btn back-btn mt-12" (click)="navigateBack()"><img class="ftr-back-img" src="assets/images/back.svg" alt="back">Back</button>
        <button type="button" class="btn footer-btn" (click)="navigate()" [disabled]="!isManualEntryCollapsed">PROCEED</button>
    </ng-container>
</app-footer>
